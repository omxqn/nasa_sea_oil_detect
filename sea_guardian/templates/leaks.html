{% extends "base.html" %}
{% block title %}Leakage Report{% endblock %}
{% block content %}
<section class="page active">
  <div class="table-wrap">
    <table>
      <thead><tr><th>#</th><th>time</th><th>status</th><th>location</th><th>volume</th></tr></thead>
      <tbody id="leaksBody">
        {% for l in leaks %}
          <tr>
            <td>{{ l.id }}</td>
            <td>{{ l.created_at.strftime('%Y-%m-%d %H:%M') }}</td>
            <td>{{ l.status }}</td>
            <td>{{ '%.4f, %.4f'|format(l.lat, l.lon) }}</td>
            <td>{{ l.volume.value }}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
    <script>// ====== Toggle Night Mode ======
document.getElementById("toggleThemeBtn")?.addEventListener("click", () => {
  const body = document.body;
  const isDark = body.classList.toggle("dark-mode");
  localStorage.setItem("theme", isDark ? "dark" : "light");
  document.getElementById("toggleThemeBtn").textContent = isDark ? "â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ" : "ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ";
});

// Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ø³ØªØ±Ø¬Ø¹ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ø³Ø§Ø¨Ù‚
window.addEventListener("load", () => {
  const saved = localStorage.getItem("theme");
  if (saved === "dark") {
    document.body.classList.add("dark-mode");
    document.getElementById("toggleThemeBtn").textContent = "â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ";
  }
});</script>
{% endblock %}
